{% extends "admin/base.html" %}
{% block title %}新闻条目管理{% endblock %}
{% block head %}
{{ super() }}
<script type="text/javascript" charset="utf-8" src="{{ url_for('static', filename='ueditor/ueditor.config.js') }}"></script>
<script type="text/javascript" charset="utf-8" src="{{ url_for('static', filename='ueditor/ueditor.all.min.js') }}"> </script>
<script type="text/javascript" charset="utf-8" src="{{ url_for('static', filename='ueditor/lang/zh-cn/zh-cn.js') }}"></script>
{% endblock %}
{% block stylesheet %}
{{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename='css/news_list_admin.css') }}">
{% endblock %}
{% block main %}
	<div class="news-list-container">
		<div class="news-list-display">
			<h1>新闻条目管理</h1>
			<button class="add-btn button-simple" type="button">添加新闻</button>
			<ul class="news-list">
				<li class="news-item" style="display: none">
					<a class="news-title" href=""></a>
					<div class="item-controller">
						<a data-id="" class="delete-btn button-simple" href="#">删除</a>
					</div>
				</li>
				{% for news in news_list %}
					<li class="news-item">
						<a class="news-title" href="/admin/news/{{ news.id }}">{{ news.title }}</a>
						<div class="item-controller">
							<a data-id="{{ news.id }}" class="delete-btn button-simple" href="#">删除</a>
						</div>
					</li>
				{% endfor %}
			</ul>
			<div class="page-nav">
				<ul>
					{% if page_info['cur'] == page_info['min'] %}
						<li class="disabled" id="last-page"><a>上一页</a></li>
					{% else %}
						<li id="last-page"><a href="/admin/product?page={{ page_info['cur']-1 }}">上一页</a></li>
					{% endif %}
					{% if page_info['cur']-page_info['min'] > 2 %}
						{% set min = page_info['cur'] - 2 %}
					{% else %}
						{% set min = page_info['min'] %}
					{% endif %}
					{% if page_info['max']-page_info['cur'] > 2 %}
						{% set max = page_info['cur'] + 2 %}
					{% else %}
						{% set max = page_info['max'] %}
					{% endif %}
					{% for i in range(min, max+1) %}
						{% if i == page_info['cur'] %}
							<li class="chosen"><a href="/admin/product?page={{ i }}">{{ i }}</a></li>
						{% else %}
							<li><a href="/admin/product?page={{ i }}">{{ i }}</a></li>
						{% endif %}
					{% endfor %}
					{% if page_info['cur'] == page_info['max'] %}
						<li class="disabled" id="next-page"><a>下一页</a></li>
					{% else %}
						<li id="next-page"><a href="/admin/product?page={{ page_info['cur']+1 }}">下一页</a></li>
					{% endif %}
				</ul>
			</div>
		</div>
		<div class="news-add hidden">
			<h1>添加新闻</h1>
			<form class="news-form" action="/admin/news/create">
				<div class="form-item">
					<label>新闻标题</label>
					<input id="title" type="text" placeholder="请输入新闻标题" />
					<div class="alert-hint hidden"></div>
				</div>
				<div class="form-item">
					<label>新闻分类</label>
					<!-- <input id="news_category_id" type="text" placeholder="请输入新闻分类" /> -->
					<select name="news_category_id" id="news_category_id"></select>
					<div class="alert-hint hidden"></div>
				</div>
				<div class="form-item form-editor">
					<label>新闻内容</label>
					<div class="editor-container">
						<script id="editor" type="text/plain"></script>
					</div>
					<div class="alert-hint hidden"></div>
				</div>
				<div class="form-item form-btns">
					<button class="cancel-btn button-simple" type="button">返回</button>
					<button class="submit-btn button-simple" type="submit">提交</button>
				</div>
			</form>
		</div>
	</div>
{% endblock %}
{% block script %}
{{ super() }}
<script src="{{ url_for('static', filename='js/news_list_admin.js') }}"></script>
{% endblock %}